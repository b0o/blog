:root {
  --default-font-family: 'Fira Sans', sans-serif;
  --heading-font-family: 'Merriweather', serif;
  --code-font-family: 'Consolas', 'Fira Code', monospace;
  --beige: 245, 245, 220;
  --dark-beige: 229, 228, 197;
  --darker-beige: 213, 211, 168;
  --black: 51, 51, 51;
  --grey: 74, 74, 74;
  --orange: 226, 88, 34;
  --white: 255, 255, 255;
  --blue: 163, 198, 255;
  --dark-blue: 79, 146, 255;
  --darker-blue: 70, 130, 180;
  --red: 247, 57, 79;
  --dark-red: 220, 20, 60;
  --darker-red: 194, 0, 42;
}

body[data-theme='light'] {
  --primary: var(--black);

  --foreground: var(--black);
  --background: var(--beige);

  --foreground-code: var(--black);
  --background-code: var(--darker-beige);

  --highlight: var(--orange);
  --divider: var(--darker-beige);

  --foreground-note: var(--black);
  --background-note: var(--blue);
  --border-note: var(--dark-blue);

  --foreground-warn: var(--white);
  --background-warn: var(--red);
  --border-warn: var(--dark-red);
}

body[data-theme='dark'] {
  --primary: var(--dark-beige);

  --foreground: var(--dark-beige);
  --background: var(--black);

  --foreground-code: var(--beige);
  --background-code: var(--grey);

  --highlight: var(--orange);
  --divider: var(--grey);

  --foreground-note: var(--white);
  --background-note: var(--darker-blue);
  --border-note: var(--dark-blue);

  --foreground-warn: var(--white);
  --background-warn: var(--dark-red);
  --border-warn: var(--darker-red);
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    font-family: var(--default-font-family);
  }
  h1,
  h2,
  h3 {
    font-family: var(--heading-font-family);
    @apply mb-2 font-bold text-primary;
  }
  code {
    font-family: var(--code-font-family);
  }
  h1 {
    @apply text-2xl;
  }
  h2 {
    @apply text-xl;
  }
  h3 {
    @apply text-lg;
  }
  img {
    @apply mx-auto max-w-full;
  }
  article p {
    @apply mb-4 leading-relaxed;
  }
  a {
    @apply no-underline border-b-2 border-divider hover:border-highlight;
  }
  :is(h1, h2, h3, h4) a {
    @apply no-underline;
  }
  hr {
    @apply my-4 border-divider;
  }
  pre {
    @apply mb-4 py-4 px-8 rounded overflow-x-auto bg-code-background;
  }
  :not(pre) > code {
    @apply px-1 text-code font-bold;
  }
  :not(pre) > code::before, :not(pre) > code::after {
    content: '\`';
  }
  pre code {
    @apply float-left min-w-full leading-normal;
  }
  .chroma .hl {
    /* unmaintainable hack to fix offset due to 4px border */
    padding-left: calc(2rem - 4px);
    @apply pr-8 -mx-8 w-auto border-l-4 border-highlight !important;
  }
  ul {
    @apply list-disc ml-4 mb-4;
  }
  ol {
    @apply list-decimal ml-4 mb-4;
  }
  :is(ul, ol) li {
    @apply mb-2;
  }
  blockquote {
    @apply pl-8 border-l-4 border-highlight;
  }
  .preload {
    transition: none !important;
  }
  kbd {
    padding: 2px 4px;
    box-shadow: 1px 1px 1px var(--foreground-code);
    @apply inline-block rounded font-bold whitespace-nowrap align-text-bottom leading-none text-foreground border border-divider;
  }
  img#gravatar:-moz-loading {
    visibility: hidden;
  }
  .nav-container::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: rgb(var(--background));
    filter: blur(20px);
    margin: -35px;
    z-index: -1;
  }
  .nav-container {
    will-change: transform;
    transition: transform 200ms linear;
  }
  .nav-container.stuck {
    @apply shadow-md;
  }
  .nav-container {
    transform: translateY(0%);
  }
  .nav-container.stuck.is-scrolling-down {
    transform: translateY(-100%);
    @apply shadow-none;
  }
  .btn {
    @apply rounded px-4 py-2;
  }
  .btn-primary {
    @apply bg-foreground text-background;
  }
  a.btn {
    @apply border-0;
  }
  ::selection {
    @apply bg-foreground text-background;
  }
}
