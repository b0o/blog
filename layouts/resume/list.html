{{ define "main" }}
  <main class="grid flex-1 grid-cols-layout">
    <div class="col-full grid flex-1 grid-cols-layout grid-rows-[auto,1fr]">
      <h1 class="mb-4 text-center">{{ i18n "Resume" }}</h1>

      <div
        data-resume-container
        data-resume-url="{{ .Site.Params.resume }}"
        class="relative col-full w-full overflow-y-auto border-y-2 border-divider sm:col-content sm:rounded-md sm:border-2"
      >
        <div
          data-resume-loading
          role="progressbar"
          class="absolute inset-0 hidden h-full items-center justify-center"
        >
          {{ partial "svgs/loader.svg" (dict "Class" "animate-spin") }}
        </div>

        <canvas class="hidden" data-resume-canvas></canvas>

        <noscript>
          <embed
            class="h-full w-full"
            type="application/pdf"
            src="{{ .Site.Params.resume }}"
          />
        </noscript>
      </div>

      <div
        data-resume-download-button
        class="hidden flex-1 flex-col items-center justify-center"
      >
        <a
          class="btn btn-primary mt-4 flex gap-2"
          style="--icon-size: 1.5rem;"
          download
          href="{{ .Site.Params.resume }}"
        >
          {{ partial "svgs/download.svg" }} Download
        </a>
      </div>
    </div>
  </main>
{{ end }}

{{ define "scripts" }}
  {{ $pdfjsWorker := resources.Get "js/vendor/pdf.worker.js" | js.Build (dict "minify" true) }}
  {{ if hugo.IsProduction }}
    {{ $pdfjsWorker = $pdfjsWorker | minify }}
  {{ end }}

  {{ $pdfjs := resources.Get "js/resume-pdfjs.ts" | js.Build (dict "params" (dict "pdfjsWorkerUrl" $pdfjsWorker.Permalink "minify" true)) }}
  {{ if hugo.IsProduction }}
    {{ $pdfjs = $pdfjs | minify }}
  {{ end }}

  {{ $resumeScript := resources.Get "js/resume.ts" | js.Build (dict "params" (dict "resumePdfjsUrl" $pdfjs.Permalink "pdfjsWorkerUrl" $pdfjsWorker.Permalink)) }}
  {{ if hugo.IsProduction }}
    {{ $resumeScript = $resumeScript | minify }}
  {{ end }}


  <script type="module" src="{{ $resumeScript.Permalink }}"></script>
{{ end }}
