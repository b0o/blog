{{ define "main" }}
  <div class="flex flex-col flex-1">
    <div
      data-resume="{{ .Site.Params.resume }}"
      class="relative h-96 w-full border-2 border-foreground overflow-y-auto"
    >
      <div data-resume-loading role="progressbar" class="absolute inset-0 h-full flex justify-center items-center">
        {{ partial "svgs/loader.svg" (dict "Class" "animate-spin") }}
      </div>

      <canvas data-resume-canvas></canvas>

      <noscript>
        <object class="" width="100%" height="100%" type="application/pdf" data="{{ .Site.Params.resume }}">
      </noscript>
    </div>

    <div data-resume-download-button class="hidden flex flex-col flex-1 justify-center items-center">
      <a
        class="mt-4 btn btn-primary flex gap-2"
        style="--icon-size: 1.5rem;"
        download
        href="{{ .Site.Params.resume }}"
      >
        {{ partial "svgs/download.svg" }} Download
      </a>
    </div>
  </div>
{{ end }}

{{ define "scripts" }}
  {{ $resumeScript := resources.Get "js/resume.js" | js.Build }}
  {{ $pdfWorker := resources.Get "js/pdf.worker.js" | js.Build }}

  {{ if hugo.IsProduction }}
    {{ $resumeScript = $resumeScript | minify }}
  {{ end }}

  <script type="module" src="{{ $resumeScript.Permalink }}"></script>
  <script src="{{ $pdfWorker.Permalink }}"></script>
{{ end }}
