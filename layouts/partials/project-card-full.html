{{ $screenshot := .Resources.GetMatch "screenshot.png" }}


<article class="card grid grid-cols-1 rounded-md sm:grid-cols-[40%_60%]">
  <div class="relative z-0">
    <picture>
      {{ if hugo.IsProduction }}
        {{ with $screenshot.Resize (printf "%dx%d webp" $screenshot.Width $screenshot.Height) }}
          <source srcset="{{ .Permalink }}" type="image/webp" />
        {{ end }}
      {{ end }}


      <img
        class="h-full rounded-t-md object-cover object-left-top sm:rounded-l-md sm:rounded-tr-none"
        src="{{ $screenshot.Permalink }}"
        alt=""
        width="{{ $screenshot.Width }}"
        height="{{ $screenshot.Height }}"
      />
    </picture>
  </div>

  <div class="flex-1 px-8 py-4 sm:flex sm:flex-col sm:justify-between">
    <div class="flex flex-col gap-2">
      <div class="flex items-center justify-between">
        <h2 class="m-0 inline-block">
          {{ if isset .Params "website" }}
            <a class="flex items-center gap-2" href="{{ .Params.website }}">
              {{ .Title }}
            </a>
          {{ else }}
            {{ .Title }}
          {{ end }}
        </h2>

        {{ with .Params.github }}
          <a
            class="btn btn-icon border-0 text-xl"
            href="{{ . }}"
            aria-label="GitHub"
          >
            {{ partial "svgs/github.svg" }}
          </a>
        {{ end }}
      </div>

      {{ .Content }}
    </div>

    <div class="mt-4">
      {{ $skillIconsUrl := printf "https://skillicons.dev/icons?i=%s&theme=light" (delimit .Params.icons ",") }}
      {{ $skillIconsAltText := printf "%s: %s" (i18n "Tech") (delimit .Params.icons ", " (printf " %s " (i18n "And"))) }}


      <img
        src="{{ $skillIconsUrl }}"
        alt="{{ $skillIconsAltText }}"
        loading="lazy"
      />
    </div>
  </div>
</article>
