{{ $isUnmaintained := isset .Params "unmaintained" }}


<article class="card grid grid-cols-1 rounded-md sm:grid-cols-[40%_60%]">
  <div class="relative z-0">
    {{ with .Resources.GetMatch "screenshot.png" }}
      {{ $blurred := .Filter (images.GaussianBlur 6) }}


      <img
        class="absolute inset-0 -z-1 rounded-t-md sm:rounded-l-md sm:rounded-tr-none"
        width="{{ .Width }}"
        height="{{ .Height }}"
        src="data:image/png;base64,{{ $blurred.Content | base64Encode }}"
        alt=""
      />

      <picture>
        {{ with .Resize (printf "%dx%d webp" .Width .Height) }}
          <source srcset="{{ .Permalink }}" type="image/webp" />
        {{ end }}


        <img
          class="h-full rounded-t-md object-cover object-left-top sm:rounded-l-md sm:rounded-tr-none"
          src="{{ .Permalink }}"
          alt=""
          width="{{ .Width }}"
          height="{{ .Height }}"
        />
      </picture>
    {{ end }}

    {{ if $isUnmaintained }}
      <div
        class="chip absolute top-0 left-2 -translate-y-1/2 bg-warn px-2 py-1 text-beige-100"
      >
        Unmaintained
      </div>
    {{ else }}
      <time
        class="chip absolute top-0 left-2 -translate-y-1/2 bg-primary px-2 py-1 text-primary-fg"
        datetime="{{ .Date.Format "2006-01-02" }}"
      >
        {{ .Date.Format "2006" }}
      </time>
    {{ end }}
  </div>

  <div class="flex-1 px-8 py-4 sm:flex sm:flex-col sm:justify-between">
    <div class="flex flex-col gap-2">
      <div class="flex items-center justify-between">
        <h2 class="m-0 inline-block">
          {{ if isset .Params "website" }}
            <a class="flex items-center gap-2" href="{{ .Params.website }}">
              {{ .Title }}
            </a>
          {{ else }}
            {{ .Title }}
          {{ end }}
        </h2>

        {{ with .Params.github }}
          <a
            class="btn btn-icon border-0 text-xl"
            href="{{ . }}"
            aria-label="GitHub"
          >
            {{ partial "svgs/github.svg" }}
          </a>
        {{ end }}
      </div>

      {{ .Content }}
    </div>

    <div class="mt-4 flex flex-nowrap justify-between gap-2">
      <div class="flex items-center gap-2 overflow-x-auto">
        {{ $skillIconsUrl := printf "https://skillicons.dev/icons?i=%s&theme=light" (delimit .Params.icons ",") }}
        {{ $skillIconsAltText := printf "%s: %s" (i18n "Tech") (delimit .Params.icons ", " (printf " %s " (i18n "And"))) }}

        {{ $svgDimensions := partial "get-svg-dimensions.html" (resources.GetRemote $skillIconsUrl) }}


        <img
          src="{{ $skillIconsUrl }}"
          alt="{{ $skillIconsAltText }}"
          width="{{ $svgDimensions.width }}"
          height="{{ $svgDimensions.height }}"
        />
      </div>
    </div>
  </div>
</article>
