<button class="primary icon theme-toggler" aria-label="{{ i18n "ThemeButton" }}">
  <svg width="24" height="24" viewBox="0 0 24 24">
    <defs>
      {{ partial "svg" "bx-moon" }}
      {{ partial "svg" "bxs-sun" }}
    </defs>

    <use href="#sun" />
  </svg>
</button>

<script>
  const btn = document.querySelector("button.theme-toggler");
  const btnSvgIcon = document.querySelector("use")

  const changeTogglerSvgIcon = function(theme) {
    const icon = theme === "dark" ? "#sun" : "#moon"
    btnSvgIcon.setAttribute("href", icon)
  }

  const theme = localStorage.getItem("__theme");
  if (theme) {
    changeTogglerSvgIcon(theme)
  }

  btn.addEventListener("click", function() {
    if (document.body.dataset.theme === "dark") {
      window.__setTheme("light");
      changeTogglerSvgIcon("light")
      return;
    }
    window.__setTheme("dark");
    changeTogglerSvgIcon("dark")
  });
</script>
