<script>
  const btn = document.querySelector("#theme-button");
  const btnSvgIcon = document.querySelector("use")

  const changeTogglerSvgIcon = function(theme) {
    const icon = theme === "dark" ? "#sun" : "#moon"
    btnSvgIcon.setAttribute("href", icon)
  }

  const theme = localStorage.getItem("__theme");
  if (theme) {
    changeTogglerSvgIcon(theme)
  }

  btn.addEventListener("click", function() {
    if (document.body.dataset.theme === "dark") {
      window.__setTheme("light");
      changeTogglerSvgIcon("light")
      return;
    }
    window.__setTheme("dark");
    changeTogglerSvgIcon("dark")
  });
</script>
