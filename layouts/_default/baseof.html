<!DOCTYPE html>
<html
  class="{{ block "rootClass" . }}
  {{ end }} h-full text-base selection:bg-primary selection:text-on-primary sm:text-lg"
  lang="{{ .Site.Params.htmlLang | default .Lang }}"
>
  <head>
    {{ partialCached "head-common.html" . }}

    {{ block "navbar-title" . }}
      {{ .Scratch.Set "navbarTitle" .Title }}
    {{ end }}

    {{ partial "head.html" . }}
    {{ partial "css-global.html" . }}

    {{ block "head" . }}
    {{ end }}
  </head>

  <body
    data-preload
    class="ease h-full bg-background font-sans text-on-background transition-colors duration-500"
  >
    {{ block "script-elements" . }}
    {{ end }}

    {{ $themeScript := resources.Get "js/theme.ts" | js.Build }}

    {{ if hugo.IsProduction }}
      {{ $themeScript = $themeScript | minify }}
    {{ end }}

    <script>{{ $themeScript.Content | safeJS }}</script>

    <div class="relative flex h-full flex-col">
      {{ partial "nav.html" . }}
      {{ partial "sidenav.html" . }}

      {{ block "main" . }}
        <main class="grid flex-1 grid-cols-layout">
          {{ .Content }}
        </main>
      {{ end }}

      {{ partial "footer.html" . }}
    </div>

    {{ range (.Params.scripts) }}
      <script type="module" defer src="{{ $.Resources.Get . }}"></script>
    {{ end }}

    {{ block "scripts" . }}
    {{ end }}
  </body>
</html>
