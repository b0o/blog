<!DOCTYPE html>
<html class="h-full" lang="{{ .Site.Params.htmlLang | default .Lang }}">
  <head>
    {{ partial "head.html" . }}

    {{ block "css" . }}
      {{ range (.Resources.Match "*.css") }}
        <link href="{{ .RelPermalink }}" rel="stylesheet" />
      {{ end }}
    {{ end }}
  </head>

  <body class="preload h-full text-foreground bg-background transition transition-colors duration-75 ease-out">
    {{ $themeScript := resources.Get "js/theme.js" }}

    {{ if (not .Site.IsServer) }}
      {{ $themeScript := $themeScript | minify }}
    {{ end }}

    <script>{{ $themeScript.Content | safeJS }}</script>

    <div class="flex flex-col h-full overflow-auto">
      {{ partial "nav.html" . }}

      <div class="mt-8 py-8 px-4 flex-1 max-w-prose mx-auto flex flex-col container mx-auto">
        <main class="flex flex-1 flex-col">
          {{ block "main" . }}
            {{ .Content }}
          {{ end }}
        </main>

        {{ partial "footer.html" . }}
      </div>
    </div>

    {{ range (.Resources.Match "*.js") }}
      <script src="{{ .RelPermalink }}"></script>
    {{ end }}

    {{ $toggleThemeScript := resources.Get "js/toggle-theme.js" }}

    {{ if (not .Site.IsServer) }}
      {{ $toggleThemeScript := $toggleThemeScript | minify }}
    {{ end }}

    <script src="{{ $toggleThemeScript.Permalink }}"></script>

    {{ if (not .Site.IsServer) }}
      <script async src="https://cdn.panelbear.com/analytics.js?site=I8KFO1BpnCi"></script>
      <script>
          window.panelbear = window.panelbear || function() { (window.panelbear.q = window.panelbear.q || []).push(arguments); };
          panelbear('config', { site: 'I8KFO1BpnCi' });
      </script>
    {{ end }}

    {{ block "scripts" . }}
    {{ end }}
  </body>
</html>
